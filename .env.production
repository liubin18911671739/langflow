# Production Environment Configuration
# Copy this file to .env.production and update with your values

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Application name and environment
LANGFLOW_APP_NAME=Langflow
LANGFLOW_ENVIRONMENT=production
LANGFLOW_DEBUG=false
LANGFLOW_LOG_LEVEL=INFO

# Application host and port
LANGFLOW_HOST=0.0.0.0
LANGFLOW_PORT=7860

# Application URL
LANGFLOW_PUBLIC_URL=https://your-domain.com

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database URL (PostgreSQL recommended for production)
# Format: postgresql://user:password@host:port/database
LANGFLOW_DATABASE_URL=postgresql://langflow:your_password@localhost:5432/langflow

# Database connection pool settings
LANGFLOW_DB_POOL_SIZE=20
LANGFLOW_DB_MAX_OVERFLOW=30
LANGFLOW_DB_POOL_TIMEOUT=30
LANGFLOW_DB_POOL_RECYCLE=3600

# Database SSL configuration
LANGFLOW_DB_SSL_MODE=require
LANGFLOW_DB_SSL_CERT=/path/to/client-cert.pem
LANGFLOW_DB_SSL_KEY=/path/to/client-key.pem
LANGFLOW_DB_SSL_ROOT_CERT=/path/to/server-ca.pem

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Secret key for JWT and encryption (generate a strong secret)
LANGFLOW_SECRET_KEY=your-super-secret-key-change-this-in-production

# JWT settings
LANGFLOW_ACCESS_TOKEN_EXPIRE_MINUTES=30
LANGFLOW_REFRESH_TOKEN_EXPIRE_DAYS=7

# API key settings
LANGFLOW_API_KEY_PREFIX=lf_
LANGFLOW_API_KEY_LENGTH=32
LANGFLOW_API_KEY_SECRET_LENGTH=48

# Rate limiting settings
LANGFLOW_ENABLE_RATE_LIMITING=true
LANGFLOW_RATE_LIMIT_REQUESTS=100
LANGFLOW_RATE_LIMIT_WINDOW=60

# CSRF protection
LANGFLOW_ENABLE_CSRF=true
LANGFLOW_CSRF_TOKEN_NAME=csrf_token

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================

# Upload directory
LANGFLOW_UPLOAD_DIR=/app/uploads
LANGFLOW_TEMP_DIR=/app/temp

# File upload limits
LANGFLOW_MAX_FILE_SIZE=10485760  # 10MB
LANGFLOW_MAX_UPLOAD_SIZE=52428800  # 50MB

# Storage backend (local, s3, gcs, azure)
LANGFLOW_STORAGE_BACKEND=local

# S3 configuration (if using S3)
LANGFLOW_AWS_ACCESS_KEY_ID=your-access-key
LANGFLOW_AWS_SECRET_ACCESS_KEY=your-secret-key
LANGFLOW_AWS_BUCKET_NAME=your-bucket-name
LANGFLOW_AWS_REGION=us-east-1

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Redis configuration for caching
LANGFLOW_REDIS_URL=redis://localhost:6379/0
LANGFLOW_REDIS_PASSWORD=your-redis-password

# Cache settings
LANGFLOW_CACHE_TTL=3600
LANGFLOW_CACHE_PREFIX=langflow

# LLM caching
LANGFLOW_LLM_CACHE_ENABLED=true
LANGFLOW_LLM_CACHE_TTL=1800

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# SMTP settings for email notifications
LANGFLOW_EMAIL_ENABLED=false
LANGFLOW_EMAIL_HOST=smtp.gmail.com
LANGFLOW_EMAIL_PORT=587
LANGFLOW_EMAIL_USERNAME=your-email@gmail.com
LANGFLOW_EMAIL_PASSWORD=your-app-password
LANGFLOW_EMAIL_FROM=noreply@your-domain.com
LANGFLOW_EMAIL_TLS=true

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Logging configuration
LANGFLOW_LOG_FILE=/app/logs/langflow.log
LANGFLOW_LOG_MAX_SIZE=10485760  # 10MB
LANGFLOW_LOG_BACKUP_COUNT=5
LANGFLOW_LOG_FORMAT=json

# Sentry configuration for error tracking
LANGFLOW_SENTRY_DSN=https://your-sentry-dsn
LANGFLOW_SENTRY_TRACES_SAMPLE_RATE=0.2
LANGFLOW_SENTRY_PROFILES_SAMPLE_RATE=0.1

# Prometheus metrics
LANGFLOW_PROMETHEUS_ENABLED=true
LANGFLOW_PROMETHEUS_PORT=9090

# =============================================================================
# AUTHENTICATION CONFIGURATION
# =============================================================================

# Authentication methods
LANGFLOW_AUTH_METHODS=jwt,api_key

# OAuth providers
LANGFLOW_GOOGLE_OAUTH_ENABLED=false
LANGFLOW_GOOGLE_CLIENT_ID=your-google-client-id
LANGFLOW_GOOGLE_CLIENT_SECRET=your-google-client-secret

LANGFLOW_GITHUB_OAUTH_ENABLED=false
LANGFLOW_GITHUB_CLIENT_ID=your-github-client-id
LANGFLOW_GITHUB_CLIENT_SECRET=your-github-client-secret

# =============================================================================
# ADMIN CONFIGURATION
# =============================================================================

# Superuser configuration
LANGFLOW_SUPERUSER_USERNAME=admin
LANGFLOW_SUPERUSER_PASSWORD=your-super-secure-password
LANGFLOW_SUPERUSER_EMAIL=admin@your-domain.com

# Admin settings
LANGFLOW_ADMIN_ENABLED=true
LANGFLOW_ADMIN_EMAILS=admin@your-domain.com

# =============================================================================
# BILLING CONFIGURATION
# =============================================================================

# Billing settings
LANGFLOW_BILLING_ENABLED=false
LANGFLOW_STRIPE_SECRET_KEY=your-stripe-secret-key
LANGFLOW_STRIPE_PUBLISHABLE_KEY=your-stripe-publishable-key
LANGFLOW_STRIPE_WEBHOOK_SECRET=your-webhook-secret

# =============================================================================
# MULTI-TENANCY CONFIGURATION
# =============================================================================

# Multi-tenancy settings
LANGFLOW_MULTI_TENANCY_ENABLED=true
LANGFLOW_TENANT_ISOLATION=true
LANGFLOW_DEFAULT_TENANT=default

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Database backup settings
LANGFLOW_BACKUP_ENABLED=true
LANGFLOW_BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
LANGFLOW_BACKUP_RETENTION_DAYS=30
LANGFLOW_BACKUP_DIR=/app/backups

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Performance tuning
LANGFLOW_WORKERS=4
LANGFLOW_MAX_REQUEST_SIZE=104857600  # 100MB
LANGFLOW_TIMEOUT=300

# Connection pooling
LANGFLOW_MAX_CONNECTIONS=100
LANGFLOW_KEEPALIVE_TIMEOUT=5

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature toggles
LANGFLOW_FEATURE_TELEMETRY=true
LANGFLOW_FEATURE_ANALYTICS=false
LANGFLOW_FEATURE_EXPERIMENTAL=false
LANGFLOW_FEATURE_BETA=false

# =============================================================================
# SECURITY HEADERS
# =============================================================================

# Security header settings
LANGFLOW_SECURITY_HSTS_ENABLED=true
LANGFLOW_SECURITY_CSP_ENABLED=true
LANGFLOW_SECURITY_XSS_PROTECTION=true
LANGFLOW_SECURITY_CONTENT_TYPE_OPTIONS=true
LANGFLOW_SECURITY_FRAME_OPTIONS=DENY

# =============================================================================
# DEVELOPMENT/OVERRIDE SETTINGS
# =============================================================================

# Database migration on startup
LANGFLOW_RUN_MIGRATIONS=true

# Auto-create superuser
LANGFLOW_AUTO_CREATE_SUPERUSER=true

# Debug mode (always false in production)
LANGFLOW_DEBUG=false